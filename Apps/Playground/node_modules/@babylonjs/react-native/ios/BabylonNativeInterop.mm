#include "BabylonNativeInterop.h"

#include <Babylon/JsRuntime.h>
#include <Babylon/Plugins/NativeWindow.h>
#include <Babylon/Plugins/NativeEngine.h>
#include <Babylon/Plugins/NativeInput.h>
//#include <Babylon/Plugins/NativeXr.h>
#include <Babylon/Polyfills/Window.h>

#include <arcana/threading/task_schedulers.h>

//#include <JavaScriptCore/JavaScript.h>

#include <Foundation/Foundation.h>

#include <optional>
#include <sstream>
#include <unistd.h>

namespace Babylon
{
    Native::Native(facebook::jsi::Runtime* jsiRuntime, void* windowPtr, size_t width, size_t height)
    {
        CFRunLoopRef jsRunLoop2 = CFRunLoopGetCurrent();
        
        int z = 59;
        std::function<void()> doSomething = [z]()
        {
            int y = z;
        };
        
        NSRunLoop* jsRunLoop = [NSRunLoop currentRunLoop];
        [jsRunLoop performBlock:^{
            doSomething();
            int x = 5;
        }];
        
        int x = 5;
    }
}
